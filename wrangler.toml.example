# https://developers.cloudflare.com/workers/configuration/compatibility-dates/
compatibility_date = "2024-02-03"

# https://developers.cloudflare.com/workers/runtime-apis/nodejs/#enable-nodejs-with-workers
compatibility_flags = [ "nodejs_compat" ]

kv_namespaces = [
  { id = "rcf-kv-dev", binding="KV" }
]

# https://developers.cloudflare.com/d1/learning/local-development/#develop-locally-with-pages
[[ d1_databases ]]
binding = "D1"
database_name = "rcf-d1-dev"
database_id = "intentionally-dummy-id"
preview_database_id = "D1"
migrations_table = "d1_migrations"
migrations_dir = "drizzle"

[[ env.preview.d1_databases ]]
binding = "D1"
database_name = "rcf-d1-preview"
database_id = "" # pnpm wrangler d1 info rcf-d1-preview
preview_database_id = "D1"
migrations_table = "d1_migrations"
migrations_dir = "drizzle"

[[ env.prod.d1_databases ]]
binding = "D1"
database_name = "rcf-d1-prod"
database_id = "" # pnpm wrangler d1 info rcf-d1-prod
preview_database_id = "D1"
migrations_table = "d1_migrations"
migrations_dir = "drizzle"

[vars]
ENVIRONMENT = "development"
LEMON_SQUEEZY_API_KEY = ""
LEMON_SQUEEZY_STORE_ID = ""
LEMON_SQUEEZY_WEBHOOK_SECRET = ""
